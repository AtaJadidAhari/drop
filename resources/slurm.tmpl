#!/bin/bash

##
## file: slurm.tmpl
## Job Resource Interface Definition
##
## ntasks [integer(1)]: Number of required tasks.
## ncpus [integer(1)]: Number of required cpus per task.
## walltime [integer(1)]: Walltime for this job, in minutes.
##
## 'resources' is an argument provided to BatchJobsParam()
##

#SBATCH --job-name=<%= job.name %>
#SBATCH --output=<%= resources$out %>
#SBATCH --error=<%= resources$err %>
##SBATCH --ntasks=<%= resources$ntasks %> dont use it since it throws an error or needs to be specified
#SBATCH --cpus-per-task=<%= resources$ncpus %>
#SBATCH --mem=<%= resources$memory %>
#SBATCH --time=<%= resources$time %>
#SBATCH --workdir=<%= resources$wd %>
#SBATCH --nodelist=<%= resources$nodelist %>

##
## Run R: we merge R output with stdout from SLURM, which gets then
## logged via --output option
##

R CMD BATCH --no-save --no-restore "<%= rscript %>" /dev/stdout

